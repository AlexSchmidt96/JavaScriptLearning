<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battleship Arena</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    h1 {
        display: flex;
        justify-content: center;
        padding-bottom: 10px;
    }

    #BattleArena {
        display: flex;
        justify-content: center;
    }

    .messageArea {
        padding: 25px;
    }

    table {
        width: 300px;
        height: 300px;
        padding-left: 10px;
        border-collapse: collapse;
    }

    td,
    th {
        width: 30px;
        border: 1px solid black;
        padding: 3px;
        text-align: center;
    }

    th {
        font-weight: bold;
        background-color: #E6E6E6;
    }
</style>

<body>
    <h1>Battleship Arena</h1>
    <div id='BattleArena'>
        <div class='messageArea'>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>A</th>
                        <th>B</th>
                        <th>C</th>
                        <th>D</th>
                        <th>E</th>
                        <th>F</th>
                        <th>G</th>
                        <th>H</th>
                        <th>I</th>
                        <th>J</th>
                    </tr>
                </thead>
                <tbody id='allyPlace'>
                </tbody>
            </table>
        </div>
        <div class='messageArea'>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>A</th>
                        <th>B</th>
                        <th>C</th>
                        <th>D</th>
                        <th>E</th>
                        <th>F</th>
                        <th>G</th>
                        <th>H</th>
                        <th>I</th>
                        <th>J</th>
                    </tr>
                </thead>
                <tbody id='enemyPlace'>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        // переписать
        function createBattleshipArea(friendElem, enemyElem) {
            let tbody = ''
            let count = 0
            let j = 0 // лишняя переменная , с которой что то надо делать!
            // переписать цикл! 
            for (let i = 0; i < 100; i++) {
                // множество непонятных случаев и проверок! переписать!
                if (count === 0) {
                    j++
                    tbody += `<th>${j}</th>`
                }
                if (i > 9) {
                    tbody += `<td class = ${i}></td>`
                } else {
                    tbody += `<td class = 0${i}></td>`
                }
                count++
                if (count === 10) {
                    count = 0
                    tbody += `</tr><tr>`
                }
            }
            tableBodyAlly.innerHTML = `<tr>${tbody}</tr>`
            tableBodyEnemy.innerHTML = `<tr>${tbody}</tr>`
            // ф-ция должна всегда что то возвращать!
        }
        const tableBodyEnemy = document.getElementById('enemyPlace')
        const tableBodyAlly = document.getElementById('allyPlace')
        createBattleshipArea(tableBodyAlly, tableBodyEnemy)

        function getRandomArbitrary(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min
        }
        let ships = []
        let sizes = [4, 3, 3, 2, 2, 2, 1, 1, 1, 1]

        function insert(ships, size) {
            let x = getRandomArbitrary(1, 10)
            let y = getRandomArbitrary(1, 10)
            let num = getRandomArbitrary(1, 4)
            try {
                for (let i = 0; i < size; i++) {
                    let obj = { x: x, y: y }
                    console.log(x, y)
                    if (!canPut(ships, x, y)) {
                        throw new Error('место занято другим кораблем')
                    }
                    console.log(`часть корабля поставлена на ${x} и ${y} координат `)
                    if (num === 1) {
                        y -= 1
                    } else if (num === 2) {
                        y += 1
                    } else if (num === 3) {
                        x -= 1
                    } else if (num === 4) {
                        x += 1
                    }
                    if (x > 10 || x < 1 || y > 10 || y < 1) {
                        throw new Error('выход за границу!')
                    }
                    ships.push(obj)
                }
                console.log(ships)
            } catch (e) {
                console.log(e.message)
                console.log('переставляем')
                insert(ships, size)
            }
        }
        function canPut(ships, x, y) {
            for (let i = 0; i < ships.length; i++) {
                if (x === ships[i].x && y === ships[i].y) {
                    return false
                }
            }
            return true
        }
        // add ships
        for (let i = 0; i < sizes.length; i++) {
            insert(ships, sizes[i])
        }
    </script>
    <!--1.Кораблей должно быть 10 
1 корабль — ряд из 4 клеток («четырёхпалубный»; линкор)
2 корабля — ряд из 3 клеток («трёхпалубные»; крейсера)
3 корабля — ряд из 2 клеток («двухпалубные»; эсминцы)
4 корабля — 1 клетка («однопалубные»; торпедные катера)
        2.Они занимают клетки и должны иметь определенную длину , указанную в описании
        3.Корабли должны размещаться рандомно по всему полю
        4.Корабли не должны соприкасаться и наслаиваться друг на друга
        5.Корабли не должны уходить за границы поля и вылезать с противопопложной стороны поля
        6.Должен быть реестр кораблей-->

    <!-- Алгоритм размещения корабля 
        1.Взять корабль из обьекта ships
        2.Поместить на рандомную клетку часть корабля
        3.Начать отступать по длине корабля в разные стороны(сторон всего 4: верх,вниз,влево,вправо) 
        4.Если корабль упирается в границу поля, то прекращаем отступ(меняем место высадки на другую клетку?) и пробуем отступать в другую сторону
        5.Смотрим не задеваем мы другой корабль (коллизия) иначе повторяем шаг 4 
        6.Если все хорошо , то корабль оказывается на поле
        7.Повторить с другими-->

    <!-- { name: 'linkor', size: 4, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) }, // реестр с рандомной системой координат
        { name: 'cruiser', size: 3, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'cruiser', size: 3, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'destroyer', size: 2, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'destroyer', size: 2, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'destroyer', size: 2, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'boat', size: 1, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'boat', size: 1, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'boat', size: 1, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат
        { name: 'boat', size: 1, x: getRandomArbitrary(0, 10), y: getRandomArbitrary(0, 10) },// реестр с рандомной системой координат -->

    <!-- let num = getRandomArbitrary(1, 4)
        if (num === 1) {
            obj = { coordinates: [{ xCoor: x + 1 }, { yCoor: y }] }
            ships.push(obj)
        } else if (num === 2) {
            obj = { coordinates: [{ xCoor: x - 1 }, { yCoor: y }] }
            ships.push(obj)
        } else if (num === 3) {
            obj = { coordinates: [{ xCoor: x }, { yCoor: y - 1 }] }
            ships.push(obj)
        } else if (num === 4) {
            obj = { coordinates: [{ xCoor: x }, { yCoor: y + 1 }] }
            ships.push(obj)
        } -->
</body>

</html>